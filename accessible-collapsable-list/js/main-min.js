"use strict";window.sw=window.sw||{},window.sw.a11y=window.sw.a11y||{},window.sw.a11y.CollapsableList={_toggleButtonEl:null,_itemsListEl:null,_keyCodes:{ENTER:13,ESC:27,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40},selectedItem:null,init:function c(a,b){this._toggleButtonEl=a,this._itemsListEl=b,this.initSelectedItem(),this.setItemToFocus(),this.setupListeners()},initSelectedItem:function c(){var a=this._itemsListEl,b=a.querySelectorAll("li[role=\"option\"]");this.selectedItem=b[0],this.selectedItem.classList.add("selected"),this.selectedItem.setAttribute("aria-selected","true"),this.setToggleButtonLabel(this.selectedItem)},setItemToFocus:function b(){var a=this._itemsListEl;a.setAttribute("aria-activedescendant",this.selectedItem.id),this.selectedItem.classList.add("focused")},getSelectedItemValue:function a(){return this.selectedItem&&this.selectedItem.innerHTML||""},getActiveDescendant:function c(){var a=this._itemsListEl,b=a.getAttribute("aria-activedescendant");return a.querySelector("#"+b)},setToggleButtonLabel:function b(a){this._toggleButtonEl.innerHTML=a.innerHTML},focusOnActiveDescendant:function b(){var a=this.getActiveDescendant();a.classList.add("focused")},updateFocusedEl:function e(a,b){if(a&&b){var c=this._itemsListEl,d=this._toggleButtonEl;a.classList.remove("focused"),b.classList.add("focused"),c.setAttribute("aria-activedescendant",b.id)}},updateSelectedItem:function b(){var a=this.getActiveDescendant();this.selectedItem.classList.remove("selected"),this.selectedItem.removeAttribute("aria-selected"),this.selectedItem=a,this.selectedItem.classList.add("selected"),this.selectedItem.setAttribute("aria-selected","true"),this.setToggleButtonLabel(this.selectedItem),console.log("Current selected item - ",this.getSelectedItemValue())},updateScrollPosition:function h(){var a=this._itemsListEl,b=a.getAttribute("aria-activedescendant"),c=a.querySelector("#"+b),d=a.clientHeight,e=a.scrollTop,f=c.offsetTop;if(a.scrollHeight>d){var g=f+c.offsetHeight;g>d+e?a.scrollTop=g-d:c.offsetTop<e&&(a.scrollTop=f)}},setupListeners:function d(){var a=this,b=this._toggleButtonEl,c=this._itemsListEl;b.addEventListener("click",function(){var d=b.getAttribute("aria-expanded");d&&"false"!==d?(b.setAttribute("aria-expanded",!1),c.classList.add("hide"),c.removeAttribute("tabindex")):(a.setItemToFocus(),b.setAttribute("aria-expanded",!0),c.classList.remove("hide"),c.setAttribute("tabindex",-1),c.focus())}),c.addEventListener("keydown",function(d){var e=d.keyCode,f=c.getAttribute("aria-activedescendant"),g=c.querySelector("#"+f);if(e===a._keyCodes.UP_ARROW||e===a._keyCodes.DOWN_ARROW){d.preventDefault();var h=e===a._keyCodes.UP_ARROW?g.previousElementSibling:g.nextElementSibling;a.updateFocusedEl(g,h),a.updateScrollPosition()}else(e===a._keyCodes.ENTER||e===a._keyCodes.ESC)&&(d.preventDefault(),b.setAttribute("aria-expanded",!1),c.classList.add("hide"),c.removeAttribute("tabindex"),e===a._keyCodes.ENTER&&a.updateSelectedItem(),b.focus())})}};var toggleButton=document.querySelector(".toggle-button"),itemsList=document.querySelector(".items-list");window.sw.a11y.CollapsableList.init(toggleButton,itemsList);
